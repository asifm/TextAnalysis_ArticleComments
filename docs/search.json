[
  {
    "objectID": "topic_model.html",
    "href": "topic_model.html",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "",
    "text": "This notebook provides a step-by-step guide for performing topic modeling (TM). TM is an exploratory and inductive technique that often requires experimenting with various algorithms and parameters to achieve satisfactory results. In this example, we use the Latent Dirichlet Allocation (LDA) algorithm, a widely used TM method. This document serves as a starting point for further experimentation, exploration, and refinement.\n\n\n\n\n\nflowchart TD\n  input([Input: text data]) --&gt; A(Pre-process text data) \n  A --&gt; B(Create document-term matrix) --&gt; C(Decide on model parameters) \n  C --&gt; D(Generate topic model) \n  D --&gt; output([Output: N lists of terms, each list representing a topic])\n  output -.-&gt; E(Evaluate coherence of topics) -.-&gt; C\n\n\n\n\n\n\n\n\n\nThis was written as a Quarto notebook, which provides a rich authoring and publishing environment. Importantly, the notebook format allows the interleaving of prose commentary and code outputs (such as tables or plots) between blocks of code.\nTo view, change or execute any code, please open the source notebook (a .qmd file in the repository) in R Studio. Please consult the Quarto website for instructions on how to set up your execution environment.\nAlternatively, you can use the R script file that contains the same code and is available in the repository."
  },
  {
    "objectID": "topic_model.html#purpose",
    "href": "topic_model.html#purpose",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "",
    "text": "This notebook provides a step-by-step guide for performing topic modeling (TM). TM is an exploratory and inductive technique that often requires experimenting with various algorithms and parameters to achieve satisfactory results. In this example, we use the Latent Dirichlet Allocation (LDA) algorithm, a widely used TM method. This document serves as a starting point for further experimentation, exploration, and refinement.\n\n\n\n\n\nflowchart TD\n  input([Input: text data]) --&gt; A(Pre-process text data) \n  A --&gt; B(Create document-term matrix) --&gt; C(Decide on model parameters) \n  C --&gt; D(Generate topic model) \n  D --&gt; output([Output: N lists of terms, each list representing a topic])\n  output -.-&gt; E(Evaluate coherence of topics) -.-&gt; C"
  },
  {
    "objectID": "topic_model.html#quarto-notebook",
    "href": "topic_model.html#quarto-notebook",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "",
    "text": "This was written as a Quarto notebook, which provides a rich authoring and publishing environment. Importantly, the notebook format allows the interleaving of prose commentary and code outputs (such as tables or plots) between blocks of code.\nTo view, change or execute any code, please open the source notebook (a .qmd file in the repository) in R Studio. Please consult the Quarto website for instructions on how to set up your execution environment.\nAlternatively, you can use the R script file that contains the same code and is available in the repository."
  },
  {
    "objectID": "topic_model.html#loading-r-packages",
    "href": "topic_model.html#loading-r-packages",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Loading R packages",
    "text": "Loading R packages\n\nlibrary(tidyverse)\nlibrary(tm)\nlibrary(topicmodels)\nlibrary(slam)\nlibrary(topicdoc)\nlibrary(stopwords)"
  },
  {
    "objectID": "topic_model.html#getting-data",
    "href": "topic_model.html#getting-data",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Getting data",
    "text": "Getting data\nWe load the data from a CSV file that contains the text of the posts. The data was collected from the online comments section of two news websites, The New York Times (NYT) and The Wall Street Journal (WSJ). The data was collected in 2023, following the Supreme Court’s decision on affirmative action in college admissions.\n\nposts &lt;- read_csv(\"data/posts.csv\")\n\n\n\n\n\n\n\nNote\n\n\n\nTo avoid ambiguity, I use post as a general term to mean top-level comments as well as nested replies. The term comment means only top-level comments.\n\n\nThe CSV file was earlier prepared from two Excel files, one for each news website, as follows:\n\nThe Excel files were manually cleaned to remove duplicate, malformed and unrelated data.\nThe two sets of cleaned data were further processed in R to standardize their column names, remove unnecessary columns and create a few new ones.\nAll data were then merged into a single CSV file, posts.csv, containing the following columns.\n\n\nglimpse(posts)\n\nRows: 44,473\nColumns: 9\n$ post_text     &lt;chr&gt; \"&gt; Is that fair? -- -- No; but that's not an argument fo…\n$ post_id       &lt;chr&gt; \"wsj1\", \"wsj2\", \"wsj3\", \"wsj4\", \"wsj5\", \"wsj6\", \"wsj7\", …\n$ post_type     &lt;chr&gt; \"reply\", \"comment\", \"comment\", \"comment\", \"comment\", \"co…\n$ post_length   &lt;dbl&gt; 100, 1443, 1240, 1193, 1191, 894, 732, 701, 640, 558, 54…\n$ post_date     &lt;date&gt; 2023-07-06, 2023-06-30, 2023-06-29, 2023-06-29, 2023-07…\n$ upvotes       &lt;dbl&gt; 2, 0, 0, 0, 1, 2, 9, 4, 5, 0, 0, 0, 6, 4, 0, 2, 2, 1, 1,…\n$ reply_count   &lt;dbl&gt; 0, 3, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 3,…\n$ article_title &lt;chr&gt; \"Opinion: Justice Jackson’s Incredible Statistic\", \"Scho…\n$ article_url   &lt;chr&gt; \"https://www.wsj.com/articles/justice-jacksons-incredibl…\n\n\n\n\nThe code that generated posts.csv from the original Excel files.\n\n\nlibrary(tidyverse)\nlibrary(readxl)\n\nnyt &lt;- read_xlsx(\"Data/CommentsNYT.xlsx\", sheet = \"cleaned\")\nwsj &lt;- read_xlsx(\"Data/CommentsWSJ.xlsx\", sheet = \"cleaned\")\n\nnyt_posts &lt;- nyt |&gt;\n  rename(\n    post_text = commentBody, post_type = commentType,\n    article_url = address, article_title = title,\n    upvotes = recommendations, reply_count = replyCount,\n  ) |&gt;\n  mutate(\n    post_id = paste0(\"nyt\", row_number()),\n    post_type = ifelse(post_type == \"userReply\", \"reply\", post_type),\n    post_date = as_date(createDate),\n    publication = \"NYT\"\n  ) |&gt;\n  select(\n    post_text, post_id, post_type, post_length, post_date,\n    upvotes, reply_count, article_title, article_url\n  )\n\nwsj_posts &lt;- wsj |&gt;\n  rename(\n    post_text = content, post_type = type,\n    article_url = address, article_title = title,\n    upvotes = rank.ranks_up, reply_count = replies_count\n  ) |&gt;\n  mutate(\n    post_id = paste0(\"wsj\", row_number()),\n    post_date = as_date(written_at),\n    publication = \"WSJ\"\n  ) |&gt;\n  select(\n    post_text, post_id, post_type, post_length, post_date,\n    upvotes, reply_count, article_title, article_url\n  )\n\nposts &lt;- bind_rows(wsj_posts, nyt_posts)\n\nwrite_csv(posts, \"Data/posts.csv\")\n\n\nBelow is a random sample of five rows from the posts data frame.\n\nslice_sample(posts, n = 5)"
  },
  {
    "objectID": "topic_model.html#topic-model-k-2",
    "href": "topic_model.html#topic-model-k-2",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Topic model: k = 2",
    "text": "Topic model: k = 2\n\nlda2 &lt;- readRDS(\"R_objects/lda_2.rds\")\ntop_terms2 &lt;- terms(lda2, 15)\nprint(top_terms2)\n\n      Topic 1     Topic 2  \n [1,] \"action\"    \"school\" \n [2,] \"affirm\"    \"student\"\n [3,] \"peopl\"     \"colleg\" \n [4,] \"court\"     \"admiss\" \n [5,] \"race\"      \"get\"    \n [6,] \"black\"     \"educ\"   \n [7,] \"right\"     \"univers\"\n [8,] \"discrimin\" \"divers\" \n [9,] \"one\"       \"mani\"   \n[10,] \"american\"  \"can\"    \n[11,] \"just\"      \"need\"   \n[12,] \"decis\"     \"work\"   \n[13,] \"justic\"    \"legaci\" \n[14,] \"now\"       \"white\"  \n[15,] \"law\"       \"year\"   \n\ntopicdoc::topic_diagnostics(topic_model = lda2, dtm_data = dtm)"
  },
  {
    "objectID": "topic_model.html#topic-model-k-3",
    "href": "topic_model.html#topic-model-k-3",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Topic model: k = 3",
    "text": "Topic model: k = 3\n\nlda3 &lt;- readRDS(\"R_objects/lda_3.rds\")\ntop_terms3 &lt;- terms(lda3, 15)\nprint(top_terms3)\n\n      Topic 1   Topic 2     Topic 3    \n [1,] \"school\"  \"peopl\"     \"court\"    \n [2,] \"student\" \"action\"    \"right\"    \n [3,] \"colleg\"  \"black\"     \"decis\"    \n [4,] \"admiss\"  \"affirm\"    \"justic\"   \n [5,] \"get\"     \"race\"      \"law\"      \n [6,] \"educ\"    \"white\"     \"suprem\"   \n [7,] \"univers\" \"divers\"    \"rule\"     \n [8,] \"work\"    \"discrimin\" \"one\"      \n [9,] \"legaci\"  \"american\"  \"state\"    \n[10,] \"mani\"    \"just\"      \"know\"     \n[11,] \"kid\"     \"way\"       \"case\"     \n[12,] \"harvard\" \"base\"      \"constitut\"\n[13,] \"need\"    \"one\"       \"say\"      \n[14,] \"year\"    \"asian\"     \"major\"    \n[15,] \"can\"     \"minor\"     \"time\"     \n\ntopicdoc::topic_diagnostics(topic_model = lda3, dtm_data = dtm)"
  },
  {
    "objectID": "topic_model.html#topic-model-k-4",
    "href": "topic_model.html#topic-model-k-4",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Topic model: k = 4",
    "text": "Topic model: k = 4\n\nlda4 &lt;- readRDS(\"R_objects/lda_4.rds\")\ntop_terms4 &lt;- terms(lda4, 15)\nprint(top_terms4)\n\n      Topic 1 Topic 2     Topic 3     Topic 4  \n [1,] \"just\"  \"action\"    \"court\"     \"school\" \n [2,] \"like\"  \"black\"     \"right\"     \"student\"\n [3,] \"one\"   \"affirm\"    \"decis\"     \"colleg\" \n [4,] \"peopl\" \"race\"      \"justic\"    \"admiss\" \n [5,] \"can\"   \"white\"     \"law\"       \"educ\"   \n [6,] \"think\" \"divers\"    \"suprem\"    \"univers\"\n [7,] \"work\"  \"discrimin\" \"rule\"      \"legaci\" \n [8,] \"want\"  \"american\"  \"case\"      \"get\"    \n [9,] \"make\"  \"base\"      \"state\"     \"kid\"    \n[10,] \"know\"  \"peopl\"     \"major\"     \"harvard\"\n[11,] \"year\"  \"asian\"     \"constitut\" \"mani\"   \n[12,] \"get\"   \"minor\"     \"fact\"      \"high\"   \n[13,] \"time\"  \"equal\"     \"thoma\"     \"class\"  \n[14,] \"good\"  \"racial\"    \"democrat\"  \"public\" \n[15,] \"’s\"    \"group\"     \"read\"      \"admit\"  \n\ntopicdoc::topic_diagnostics(topic_model = lda4, dtm_data = dtm)"
  },
  {
    "objectID": "topic_model.html#topic-model-k-5",
    "href": "topic_model.html#topic-model-k-5",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Topic model: k = 5",
    "text": "Topic model: k = 5\n\nlda5 &lt;- readRDS(\"R_objects/lda_5.rds\")\ntop_terms5 &lt;- terms(lda5, 15)\nprint(top_terms5)\n\n      Topic 1     Topic 2   Topic 3   Topic 4  Topic 5    \n [1,] \"court\"     \"school\"  \"get\"     \"one\"    \"action\"   \n [2,] \"right\"     \"student\" \"peopl\"   \"can\"    \"black\"    \n [3,] \"decis\"     \"colleg\"  \"year\"    \"think\"  \"affirm\"   \n [4,] \"justic\"    \"educ\"    \"work\"    \"say\"    \"race\"     \n [5,] \"law\"       \"admiss\"  \"want\"    \"make\"   \"white\"    \n [6,] \"suprem\"    \"univers\" \"just\"    \"like\"   \"divers\"   \n [7,] \"rule\"      \"legaci\"  \"time\"    \"point\"  \"discrimin\"\n [8,] \"state\"     \"kid\"     \"like\"    \"person\" \"american\" \n [9,] \"case\"      \"harvard\" \"good\"    \"know\"   \"base\"     \n[10,] \"constitut\" \"high\"    \"’s\"      \"differ\" \"peopl\"    \n[11,] \"major\"     \"class\"   \"countri\" \"even\"   \"asian\"    \n[12,] \"thoma\"     \"public\"  \"make\"    \"just\"   \"minor\"    \n[13,] \"democrat\"  \"admit\"   \"now\"     \"actual\" \"equal\"    \n[14,] \"govern\"    \"elit\"    \"need\"    \"also\"   \"racial\"   \n[15,] \"polit\"     \"applic\"  \"take\"    \"best\"   \"group\"    \n\ntopicdoc::topic_diagnostics(topic_model = lda5, dtm_data = dtm)"
  },
  {
    "objectID": "topic_model.html#topic-model-k-6",
    "href": "topic_model.html#topic-model-k-6",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Topic model: k = 6",
    "text": "Topic model: k = 6\n\nlda6 &lt;- readRDS(\"R_objects/lda_6.rds\")\ntop_terms6 &lt;- terms(lda6, 15)\nprint(top_terms6)\n\n      Topic 1   Topic 2    Topic 3   Topic 4     Topic 5     Topic 6 \n [1,] \"year\"    \"school\"   \"admiss\"  \"action\"    \"court\"     \"just\"  \n [2,] \"time\"    \"student\"  \"get\"     \"affirm\"    \"right\"     \"think\" \n [3,] \"peopl\"   \"colleg\"   \"legaci\"  \"race\"      \"decis\"     \"like\"  \n [4,] \"countri\" \"educ\"     \"harvard\" \"black\"     \"justic\"    \"make\"  \n [5,] \"one\"     \"kid\"      \"applic\"  \"white\"     \"law\"       \"know\"  \n [6,] \"work\"    \"univers\"  \"admit\"   \"divers\"    \"suprem\"    \"say\"   \n [7,] \"never\"   \"high\"     \"can\"     \"peopl\"     \"rule\"      \"can\"   \n [8,] \"now\"     \"need\"     \"student\" \"discrimin\" \"case\"      \"’s\"    \n [9,] \"america\" \"public\"   \"one\"     \"asian\"     \"constitut\" \"point\" \n[10,] \"live\"    \"elit\"     \"merit\"   \"american\"  \"state\"     \"one\"   \n[11,] \"back\"    \"famili\"   \"qualifi\" \"equal\"     \"thoma\"     \"want\"  \n[12,] \"long\"    \"mani\"     \"like\"    \"minor\"     \"democrat\"  \"actual\"\n[13,] \"great\"   \"parent\"   \"univers\" \"racial\"    \"major\"     \"read\"  \n[14,] \"take\"    \"graduat\"  \"colleg\"  \"base\"      \"polit\"     \"thing\" \n[15,] \"chang\"   \"children\" \"best\"    \"group\"     \"vote\"      \"differ\"\n\ntopicdoc::topic_diagnostics(topic_model = lda6, dtm_data = dtm)"
  },
  {
    "objectID": "topic_model.html#footnotes",
    "href": "topic_model.html#footnotes",
    "title": "Affirmative Action in College Admission: Analyzing Responses to Supreme Court Decision",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nJordan Boyd-Graber, David Mimno, and David Newman. Care and Feeding of Topic Models: Problems, Diagnostics, and Improvements. Handbook of Mixed Membership Models and Their Applications, 2014.↩︎"
  }
]